const skillsStructure = {
    "âš”ï¸ Ğ‘ĞĞ•Ğ’Ğ«Ğ• ĞĞĞ’Ğ«ĞšĞ˜": [
        "Ğ¢ÑĞ¶Ñ‘Ğ»Ğ°Ñ Ğ±Ñ€Ğ¾Ğ½Ñ", "Ğ›Ñ‘Ğ³ĞºĞ°Ñ Ğ±Ñ€Ğ¾Ğ½Ñ", "Ğ”Ğ²ÑƒÑ€ÑƒÑ‡Ğ½Ğ¾Ğµ Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ", 
        "ĞĞ´Ğ½Ğ¾Ñ€ÑƒÑ‡Ğ½Ğ¾Ğµ Ğ¾Ñ€ÑƒĞ¶Ğ¸Ğµ", "Ğ¡Ñ‚Ñ€ĞµĞ»ÑŒĞ±Ğ°", "Ğ‘Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ", 
        "Ğ”Ñ€ĞµĞ²ĞºĞ¾Ğ²Ğ¾Ğµ", "Ğ ÑƒĞºĞ¾Ğ¿Ğ°ÑˆĞ½Ñ‹Ğ¹ Ğ±Ğ¾Ğ¹", "ĞœĞµÑ‚Ğ°Ğ½Ğ¸Ğµ"
    ],
    "ğŸ­ ĞĞ‘Ğ©Ğ˜Ğ• ĞĞĞ’Ğ«ĞšĞ˜": [
        "Ğ¡ĞºÑ€Ñ‹Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ", "ĞšÑ€Ğ°ÑĞ½Ğ¾Ñ€ĞµÑ‡Ğ¸Ñ", "Ğ›Ğ¾Ğ²ĞºĞ¾ÑÑ‚ÑŒ", "Ğ’Ñ‹Ğ½Ğ¾ÑĞ»Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ",
        "Ğ’Ğ·Ğ»Ğ¾Ğ¼", "Ğ’Ğ¾ÑĞ¿Ñ€Ğ¸ÑÑ‚Ğ¸Ğµ", "Ğ£Ğ´Ğ°Ñ‡Ğ°", "ĞšĞ°Ñ€Ğ¼Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºÑ€Ğ°Ğ¶Ğ¸"
    ],
    "âš—ï¸ Ğ Ğ•ĞœĞ•Ğ¡Ğ›Ğ": [
        "ĞĞ»Ñ…Ğ¸Ğ¼Ğ¸Ñ", "ĞšÑƒĞ·Ğ½ĞµÑ‡Ğ½Ğ¾Ğµ Ğ´ĞµĞ»Ğ¾", "Ğ—Ğ°Ñ‡Ğ°Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ", "Ğ ĞµĞ¼ĞµÑĞ»Ğ¾"
    ],
    "ğŸ”® ĞœĞĞ“Ğ˜Ğ¯": [
        "ĞœĞ°Ğ³Ğ¸Ñ Ğ²Ğ¾Ğ´Ñ‹", "ĞœĞ°Ğ³Ğ¸Ñ Ğ·ĞµĞ¼Ğ»Ğ¸", "ĞœĞ°Ğ³Ğ¸Ñ Ğ²Ğ¾Ğ·Ğ´ÑƒÑ…Ğ°", "ĞœĞ°Ğ³Ğ¸Ñ ĞºÑ€Ğ¾Ğ²Ğ¸",
        "ĞœĞ°Ğ³Ğ¸Ñ Ğ¾Ğ³Ğ½Ñ", "ĞœĞ°Ğ³Ğ¸Ñ Ğ¼ĞµÑ‚Ğ°Ğ»Ğ»Ğ°", "ĞœĞ°Ğ³Ğ¸Ñ Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ñ‹", "ĞœĞ°Ğ³Ğ¸Ñ ÑĞ²ĞµÑ‚Ğ°",
        "ĞœĞ°Ğ³Ğ¸Ñ Ñ‚ÑŒĞ¼Ñ‹", "ĞœĞ°Ğ³Ğ¸Ñ Ğ¸Ğ½Ñ„ĞµÑ€Ğ½Ğ¾", "ĞœĞ°Ğ³Ğ¸Ñ Ñ…Ğ°Ğ¾ÑĞ°", "ĞœĞ°Ğ³Ğ¸Ñ Ñ€Ğ°Ğ·ÑƒĞ¼Ğ°",
        "ĞœĞ°Ğ³Ğ¸Ñ Ğ–Ğ¸Ğ·Ğ½Ğ¸", "ĞœĞ°Ğ³Ğ¸Ñ ÑĞ¼ĞµÑ€Ñ‚Ğ¸", "ĞœĞ°Ğ³Ğ¸Ñ Ğ¿ÑƒÑÑ‚Ğ¾Ñ‚Ñ‹", "ĞœĞ°Ğ³Ğ¸Ñ Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ğ¸"
    ]
};
function renderSkills() {
    const container = document.getElementById('skillsContainer');
    if (!container) return;
    
    container.innerHTML = '';

    for (const [groupName, skills] of Object.entries(skillsStructure)) {
        const section = document.createElement('div');
        section.className = 'skills-section';
        
        const title = document.createElement('div');
        title.className = 'section-title';
        title.innerHTML = groupName;
        section.appendChild(title);

        skills.forEach(skill => {
            const skillRow = document.createElement('div');
            skillRow.className = 'skill-row';
            const isLocked = isSkillLocked(skill);
            if (isLocked) {
                skillRow.classList.add('skill-locked');
            }
            
            const spellIcon = groupName === "ğŸ”® ĞœĞĞ“Ğ˜Ğ¯" ? 
                `<span class="spell-icon" onclick="showSpells('${skill}')" title="ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ·Ğ°ĞºĞ»Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ">ğŸ”®</span>` : '';
            
            const lockBtnText = isLocked ? 'ğŸ”“' : 'ğŸ”’';
            const lockBtnClass = isLocked ? 'btn-lock locked' : 'btn-lock';
            
            skillRow.innerHTML = `
                <div class="skill-name">
                    <span>ğŸ¯</span>
                    <span>${skill}</span>
                    ${spellIcon}
                </div>
                <div class="skill-controls">
                    <button class="btn btn-minus" onclick="decreaseSkill('${skill}')" ${isLocked ? 'disabled' : (getSkillValue(skill) <= 5 ? 'disabled' : '')}>-</button>
                    <span class="skill-value" id="skill-${skill}">${getSkillValue(skill)}</span>
                    <button class="btn btn-plus" onclick="increaseSkill('${skill}')" ${isLocked ? 'disabled' : (getFreePoints() <= 0 ? 'disabled' : '')}>+</button>
                    <button class="${lockBtnClass}" onclick="toggleSkillLock('${skill}')" title="${isLocked ? 'Ğ Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ' : 'Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ'}">${lockBtnText}</button>
                    <button class="btn btn-roll" onclick="rollSkill('${skill}')" ${isLocked ? 'disabled' : ''}>Ğ‘Ñ€Ğ¾ÑĞ¾Ğº</button>
                </div>
            `;
            section.appendChild(skillRow);
        });
        container.appendChild(section);
    }
    updateUI();
}
function increaseSkill(skillName) {
    if (isSkillLocked(skillName)) {
        alert('âŒ Ğ­Ñ‚Ğ¾Ñ‚ Ğ½Ğ°Ğ²Ñ‹Ğº Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½!');
        return;
    }
    
    const isMagicSkill = skillsStructure["ğŸ”® ĞœĞĞ“Ğ˜Ğ¯"].includes(skillName);
    if (isMagicSkill && !availableMagicSchools[skillName] && getSkillValue(skillName) <= 5) {
        const masterPermission = confirm(
            `ğŸ”® Ğ’Ñ‹ Ğ¿Ñ‹Ñ‚Ğ°ĞµÑ‚ĞµÑÑŒ Ğ¸Ğ·ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½ÑƒÑ Ğ¼Ğ°Ğ³Ğ¸Ñ!\n\n` +
            `ĞĞ°Ğ²Ñ‹Ğº "${skillName}" Ğ½Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ğ´Ğ»Ñ Ğ²Ğ°ÑˆĞµĞ¹ Ñ€Ğ°ÑÑ‹.\n` +
            `Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ ĞœĞ°ÑÑ‚ĞµÑ€Ğ° Ğ½Ğ° Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºÑƒ ÑÑ‚Ğ¾Ğ¹ Ğ¼Ğ°Ğ³Ğ¸Ğ¸?\n\n` +
            `ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "ĞĞš" Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºĞ¸ (Ğ½Ğ°Ğ²Ñ‹Ğº ÑÑ‚Ğ°Ğ½ĞµÑ‚ 5 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ) Ğ¸Ğ»Ğ¸ "ĞÑ‚Ğ¼ĞµĞ½Ğ°" Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¼ĞµĞ½Ñ‹.`
        );
        
        if (masterPermission) {
            availableMagicSchools[skillName] = true;
            setSkillValue(skillName, 5);
            updateMagicSkillsDisplay();
            updateUI();
            saveCharacterData();
        }
        return;
    }
    
    const freePoints = getFreePoints();
    if (freePoints > 0) {
        const skillValue = getSkillValue(skillName);
        setSkillValue(skillName, skillValue + 1);
        setFreePoints(freePoints - 1);
        updateUI();
        saveCharacterData();
    }
}
window.renderSkills = renderSkills;
window.increaseSkill = increaseSkill;
function decreaseSkill(skillName) {
    if (isSkillLocked(skillName)) {
        alert('âŒ Ğ­Ñ‚Ğ¾Ñ‚ Ğ½Ğ°Ğ²Ñ‹Ğº Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½!');
        return;
    }
    
    const skillValue = getSkillValue(skillName);
    if (skillValue > 5) {
        const freePoints = getFreePoints();
        setSkillValue(skillName, skillValue - 1);
        setFreePoints(freePoints + 1);
        updateUI();
        saveCharacterData();
    }
}
window.decreaseSkill = decreaseSkill;

